---

## 1️⃣ 中台建设目标（Why）

### 背景问题

* 多业务线 Flutter 项目各自为战
* 基础能力重复建设
* SDK 接入不一致
* 质量与稳定性不可控

### 中台目标

> 构建一个 **统一能力、统一规范、统一演进** 的 Flutter 客户端中台

核心价值：

* 降低业务线启动成本
* 提升交付速度
* 控制技术风险
* 沉淀长期技术资产

---

## 2️⃣ 中台总体架构蓝图

```
┌──────────────────────────────────┐
│        业务 App（多条业务线）     │
│  App-A   App-B   App-C            │
└──────────────▲───────────────────┘
               │
┌──────────────┴───────────────────┐
│     Flutter 客户端中台能力层       │
│                                   │
│  ┌──────── Core ────────┐         │
│  │ AppShell / Router     │         │
│  │ Theme / Language      │         │
│  └──────────────────────┘         │
│                                   │
│  ┌────── Services ──────┐         │
│  │ Api / Crash / Log    │         │
│  │ Storage / Payment    │         │
│  │ Map / Scan / Share   │         │
│  └──────────────────────┘         │
│                                   │
│  ┌────── Features ──────┐         │
│  │ Auth / Profile       │         │
│  │ Settings / Update    │         │
│  └──────────────────────┘         │
│                                   │
└───────────────────────────────────┘
```

---

## 3️⃣ 中台分层职责

### 3.1 Core 层（强治理）

* App 壳
* 路由体系
* 全局配置
* 不允许业务线修改

### 3.2 Service 层（统一能力）

* 所有 SDK 统一封装
* 业务线 **只能调用**
* 中台统一升级、统一修复

### 3.3 Feature 层（半开放）

* 通用业务模块
* 可配置、可裁剪
* 业务线可扩展但不可破坏接口

---

## 4️⃣ 中台治理机制

* 技术委员会决策
* RFC 驱动演进
* Demo 驱动验证
* 版本冻结与灰度

---

## 5️⃣ 中台成功标志

* 新 App 启动 ≤ 1 天
* 基础能力零重复
* SDK 升级全局同步
* 架构一致性 ≥ 95%

---

# 二、《多业务线共用策略》

**文件名建议**：
`docs/FLUTTER_MULTI_BUSINESS_STRATEGY.md`

---

## 1️⃣ 多业务线模型

```
Flutter 中台
   ├── 业务线 A（ToC）
   ├── 业务线 B（ToB）
   └── 业务线 C（内部系统）
```

---

## 2️⃣ 共用策略分级（非常关键）

### L0：强制共用（禁止分叉）

* Core
* Router
* Crash / Log
* Storage
* Network

> 任何业务线不得自定义替代方案

---

### L1：配置化共用（推荐）

* 登录方式
* 主题样式
* 功能开关
* 权限策略

通过配置解决差异，而不是复制代码。

---

### L2：可裁剪共用（允许定制）

* Feature 模块
* UI 风格
* 部分流程

要求：

* 不修改原模块
* 通过扩展点实现

---

## 3️⃣ 多业务线冲突解决机制

### 冲突类型

| 类型     | 处理方式    |
| ------ | ------- |
| 技术选型冲突 | 技术委员会裁决 |
| 功能差异   | 配置化     |
| UI 差异  | 主题系统    |

---

## 4️⃣ 业务线准入机制

新业务线接入 Flutter 中台必须满足：

* 使用标准模板
* 通过评审 Checklist
* 不私接 SDK

---

## 5️⃣ 共用效果衡量

* 代码复用率
* SDK 接入重复率
* 人力节省比例

---